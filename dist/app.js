(()=>{var t={379:()=>{document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("menu-icon"),e=document.getElementById("sidebar"),a=document.getElementById("overlay"),s=document.querySelector(".game-container");t&&t.addEventListener("click",()=>{t.classList.toggle("open"),e.classList.toggle("open"),a.classList.toggle("open")}),a&&a.addEventListener("click",()=>{t.classList.remove("open"),e.classList.remove("open"),a.classList.remove("open"),s&&s.classList.remove("blur")})})},681:()=>{function t(t){const e="string"==typeof(s=t.region)&&s?s.split(" - ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" - "):"Unknown Region",a=t.playerCountry?function(t){if(!window.allFlagsData)return"";for(const e in window.allFlagsData){const a=window.allFlagsData[e];for(const e in a){const s=a[e].find(e=>e.country===t);if(s)return s.flag}}return""}(t.playerCountry):"";var s;return`\n        <li>\n            <span class="player-name">\n                ${t.name}, from ${t.playerCountry||""} ${a?`<span class="player-country-flag">${a}</span>`:""}\n            </span>\n            <span class="game-level">\n                Level: ${t.difficulty} - ${e}\n            </span>\n            <span class="score-details">\n                Time: ${t.time}, in ${t.moves} moves\n            </span>            \n        </li>\n    `}document.addEventListener("DOMContentLoaded",async()=>{const e=document.getElementById("high-scores-list"),a=document.getElementById("no-scores-container");if(e&&a){await async function(){window.allFlagsData={};const t=["africa","europe","asia","america"];for(const e of t)try{const t=await fetch(`dist/flags_${e}.json`);t.ok&&(window.allFlagsData[e]=await t.json())}catch(t){console.error(`Error loading flags for ${e}:`,t)}}();const s=JSON.parse(localStorage.getItem("highScores"))||[];s.length>0?(e.style.display="block",a.style.display="none",e.innerHTML=s.map(t).join("")):(e.style.display="none",a.style.display="block")}})},771:()=>{class t{constructor(){this.cards=[],this.flippedCards=[],this.matchedPairs=0,this.moves=0,this.startTime=null,this.timer=null,this.gameStarted=!1,this.gameBoard=document.getElementById("game-board"),this.movesElement=document.getElementById("moves"),this.timeElement=document.getElementById("time"),this.nameModal=document.getElementById("name-modal"),this.nameForm=document.getElementById("name-form"),this.playerNameInput=document.getElementById("player-name"),this.playerCountrySelect=document.getElementById("player-country"),this.modalFinalMoves=document.getElementById("modal-final-moves"),this.modalFinalTime=document.getElementById("modal-final-time"),this.closeModalButton=document.querySelector(".close-modal"),this.continent="africa",this.difficulty="easy",this.region="all",this.initializeSelectors(),this.updateRegionSelector().then(()=>{this.startNewGame()})}initializeSelectors(){const t=document.getElementById("continent-select"),e=document.getElementById("difficulty-select"),a=document.getElementById("region-select"),s=document.getElementById("new-game-btn"),n=document.getElementById("restart-btn");t.addEventListener("change",async t=>{this.continent=t.target.value,await this.updateRegionSelector(),this.startNewGame()}),e.addEventListener("change",t=>{this.difficulty=t.target.value,this.startNewGame()}),a.addEventListener("change",t=>{this.region=t.target.value,this.startNewGame()}),s.addEventListener("click",()=>this.startNewGame()),n.addEventListener("click",()=>this.restartGame()),this.nameForm&&this.nameForm.addEventListener("submit",t=>{t.preventDefault();const e=this.playerNameInput.value.trim(),a=this.playerCountrySelect?this.playerCountrySelect.value:"";e&&(this.saveScore(e,this.moves,this.timeElement.textContent,this.difficulty,this.region,a),this.nameModal.style.display="none",this.playerNameInput.value="",this.playerCountrySelect&&(this.playerCountrySelect.value=""))}),this.closeModalButton&&this.closeModalButton.addEventListener("click",()=>{this.nameModal.style.display="none"}),this.nameModal&&this.nameModal.addEventListener("click",t=>{t.target===this.nameModal&&(this.nameModal.style.display="none")})}async updateRegionSelector(){const t=document.getElementById("region-select"),e=t.parentElement,a=e.querySelector(".selector-title"),s=document.querySelector(".game-title");t.innerHTML="";const n=this.continent.charAt(0).toUpperCase()+this.continent.slice(1);a.textContent="Select Region",s.textContent=`Flags of ${n}`;const i={africa:"dist/flags_africa.json",europe:"dist/flags_europe.json",asia:"dist/flags_asia.json",america:"dist/flags_america.json"}[this.continent];if(i){e.style.display="block";try{const e=await fetch(i);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const a=await e.json(),s=document.createElement("option");s.value="all",s.textContent=`All of ${n}`,t.appendChild(s);for(const e in a){const a=document.createElement("option");a.value=e,a.textContent=e,t.appendChild(a)}this.region="all",t.value="all"}catch(t){console.error(`Error loading regions for ${this.continent}:`,t),e.style.display="none"}}else e.style.display="none"}async getFlags(){const t={africa:"dist/flags_africa.json",europe:"dist/flags_europe.json",asia:"dist/flags_asia.json",america:"dist/flags_america.json"}[this.continent];if(!t)return[];try{const e=await fetch(t),a=await e.json();return"all"===this.region?Object.values(a).flat():a[this.region]||[]}catch(t){return console.error("Error loading flag data:",t),[]}}getDifficultySettings(){return{easy:{rows:3,cols:4,pairs:6},medium:{rows:4,cols:4,pairs:8},hard:{rows:5,cols:4,pairs:10}}[this.difficulty]}async generateCards(){const{pairs:t}=this.getDifficultySettings();let e=await this.getFlags();e=this.shuffleArray(e);const a=[],s=e.slice(0,t);for(let e=0;e<t&&e<s.length;e++){const t=s[e];a.push(t,t)}return this.shuffleArray(a)}shuffleArray(t){const e=[...t];for(let t=e.length-1;t>0;t--){const a=Math.floor(Math.random()*(t+1));[e[t],e[a]]=[e[a],e[t]]}return e}async createGameBoard(){this.cards=await this.generateCards(),this.renderGameBoard()}renderGameBoard(){const{rows:t,cols:e}=this.getDifficultySettings();this.gameBoard.style.gridTemplateColumns=`repeat(${e}, 1fr)`,this.gameBoard.innerHTML="",this.cards.forEach((t,e)=>{const a=document.createElement("div");a.className="card",a.dataset.index=e,a.innerHTML=`\n                <div class="card-back">?</div>\n                <div class="card-front" data-tippy-content="${t.country}">\n                    ${t.flag}\n                </div>\n            `,a.addEventListener("click",()=>this.flipCard(a,e)),this.gameBoard.appendChild(a)}),this.initializeTooltips()}initializeTooltips(){tippy("[data-tippy-content]",{followCursor:!0})}flipCard(t,e){this.flippedCards.length>=2||t.classList.contains("flipped")||t.classList.contains("matched")||(this.gameStarted||(this.startTimer(),this.gameStarted=!0),t.classList.add("flipped"),this.flippedCards.push({element:t,country:this.cards[e].country,index:e}),2===this.flippedCards.length&&(this.moves++,this.movesElement.textContent=this.moves,setTimeout(()=>this.checkMatch(),1e3)))}checkMatch(){const[t,e]=this.flippedCards;t.country===e.country?(t.element.classList.add("matched"),e.element.classList.add("matched"),this.matchedPairs++,this.matchedPairs===this.getDifficultySettings().pairs&&this.gameWon()):(t.element.classList.remove("flipped"),e.element.classList.remove("flipped")),this.flippedCards=[]}startTimer(){this.startTime=Date.now(),this.timer=setInterval(()=>{const t=Math.floor((Date.now()-this.startTime)/1e3),e=Math.floor(t/60).toString().padStart(2,"0"),a=(t%60).toString().padStart(2,"0");this.timeElement.textContent=`${e}:${a}`},1e3)}stopTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)}async gameWon(){this.stopTimer();const t=this.timeElement.textContent;this.nameModal&&(this.modalFinalMoves.textContent=this.moves,this.modalFinalTime.textContent=t,await this.populateCountryDropdown(),this.nameModal.style.display="block")}async populateCountryDropdown(){if(this.playerCountrySelect){this.playerCountrySelect.innerHTML='<option value="">Select your country</option>';try{const t=await this.getFlags();[...new Set(t.map(t=>t.country))].forEach(t=>{const e=document.createElement("option");e.value=t,e.textContent=t,this.playerCountrySelect.appendChild(e)})}catch(t){console.error("Error populating country dropdown:",t)}}}saveScore(t,e,a,s,n,i){const o={name:t,moves:e,time:a,difficulty:s,region:`${this.continent} - ${n}`,playerCountry:i},r=JSON.parse(localStorage.getItem("highScores"))||[];r.push(o),r.sort((t,e)=>t.moves-e.moves||t.time.localeCompare(e.time)),r.splice(10),localStorage.setItem("highScores",JSON.stringify(r))}resetGame(){this.stopTimer(),this.flippedCards=[],this.matchedPairs=0,this.moves=0,this.gameStarted=!1,this.movesElement.textContent="0",this.timeElement.textContent="00:00",this.nameModal&&(this.nameModal.style.display="none")}startNewGame(){this.resetGame(),this.createGameBoard()}async restartGame(){this.resetGame(),this.cards=this.shuffleArray([...this.cards]),await this.createGameBoard()}}window.addEventListener("DOMContentLoaded",()=>{document.getElementById("game-board")&&new t})},972:()=>{document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("theme-toggle"),e=document.body,a=t=>{"dark"===t?e.classList.add("dark-mode"):e.classList.remove("dark-mode")},s=localStorage.getItem("theme");a(s||"light"),t.addEventListener("click",()=>{e.classList.contains("dark-mode")?(a("light"),localStorage.setItem("theme","light")):(a("dark"),localStorage.setItem("theme","dark"))})})}},e={};function a(s){var n=e[s];if(void 0!==n)return n.exports;var i=e[s]={exports:{}};return t[s](i,i.exports,a),i.exports}a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},a.d=(t,e)=>{for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";a(771),a(379),a(681),a(972)})()})();