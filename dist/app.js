(()=>{var t={379:()=>{document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("menu-icon"),e=document.getElementById("sidebar"),n=document.getElementById("overlay"),a=document.querySelector(".game-container");t&&t.addEventListener("click",()=>{t.classList.toggle("open"),e.classList.toggle("open"),n.classList.toggle("open")}),n&&n.addEventListener("click",()=>{t.classList.remove("open"),e.classList.remove("open"),n.classList.remove("open"),a&&a.classList.remove("blur")})})},681:()=>{function t(t){const e="string"==typeof(a=t.region)&&a?a.split(" - ").map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" - "):"Unknown Region",n=t.playerCountry?function(t){if(!window.allFlagsData)return"";for(const e in window.allFlagsData){const n=window.allFlagsData[e];for(const e in n){const a=n[e].find(e=>e.country===t);if(a)return a.flag}}return""}(t.playerCountry):"";var a;return`\n        <li>\n            <span class="player-name">\n                ${t.name}, from ${t.playerCountry||""} ${n?`<span class="player-country-flag">${n}</span>`:""}\n            </span>\n            <span class="game-level">\n                Level: ${t.difficulty} - ${e}\n            </span>\n            <span class="score-details">\n                Time: ${t.time}, in ${t.moves} moves\n            </span>            \n        </li>\n    `}document.addEventListener("DOMContentLoaded",async()=>{const e=document.getElementById("high-scores-list"),n=document.getElementById("no-scores-container");if(e&&n){await async function(){window.allFlagsData={};const t=["africa","europe","asia","america"];for(const e of t)try{const t=await fetch(`dist/flags_${e}.json`);t.ok&&(window.allFlagsData[e]=await t.json())}catch(t){console.error(`Error loading flags for ${e}:`,t)}}();const a=JSON.parse(localStorage.getItem("highScores"))||[];a.length>0?(e.style.display="block",n.style.display="none",e.innerHTML=a.map(t).join("")):(e.style.display="none",n.style.display="block")}})},771:()=>{class t{constructor(){this.cards=[],this.flippedCards=[],this.matchedPairs=0,this.moves=0,this.startTime=null,this.timer=null,this.gameStarted=!1,this.gameBoard=document.getElementById("game-board"),this.movesElement=document.getElementById("moves"),this.timeElement=document.getElementById("time"),this.nameModal=document.getElementById("name-modal"),this.nameForm=document.getElementById("name-form"),this.playerNameInput=document.getElementById("player-name"),this.playerCountrySelect=document.getElementById("player-country"),this.modalFinalMoves=document.getElementById("modal-final-moves"),this.modalFinalTime=document.getElementById("modal-final-time"),this.closeModalButton=document.querySelector(".close-modal"),this.continent="africa",this.difficulty="easy",this.region="all",this.initializeSelectors(),this.updateRegionSelector().then(()=>{this.startNewGame()})}initializeSelectors(){const t=document.getElementById("continent-select"),e=document.getElementById("difficulty-select"),n=document.getElementById("region-select"),a=document.getElementById("new-game-btn"),s=document.getElementById("restart-btn");t.addEventListener("change",async t=>{this.continent=t.target.value,await this.updateRegionSelector(),this.startNewGame()}),e.addEventListener("change",t=>{this.difficulty=t.target.value,this.startNewGame()}),n.addEventListener("change",t=>{this.region=t.target.value,this.startNewGame()}),a.addEventListener("click",()=>this.startNewGame()),s.addEventListener("click",()=>this.restartGame()),this.nameForm&&this.nameForm.addEventListener("submit",t=>{t.preventDefault();const e=this.playerNameInput.value.trim(),n=this.playerCountrySelect?this.playerCountrySelect.value:"";e&&(this.saveScore(e,this.moves,this.timeElement.textContent,this.difficulty,this.region,n),this.nameModal.style.display="none",this.playerNameInput.value="",this.playerCountrySelect&&(this.playerCountrySelect.value=""))}),this.closeModalButton&&this.closeModalButton.addEventListener("click",()=>{this.nameModal.style.display="none"}),this.nameModal&&this.nameModal.addEventListener("click",t=>{t.target===this.nameModal&&(this.nameModal.style.display="none")})}async updateRegionSelector(){const t=document.getElementById("region-select"),e=t.parentElement,n=e.querySelector(".selector-title"),a=document.querySelector(".game-title");t.innerHTML="";const s=this.continent.charAt(0).toUpperCase()+this.continent.slice(1);n.textContent="Select Region",a.textContent=`Flags of ${s}`;const o={africa:"dist/flags_africa.json",europe:"dist/flags_europe.json",asia:"dist/flags_asia.json",america:"dist/flags_america.json"}[this.continent];if(o){e.style.display="block";try{const e=await fetch(o);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json(),a=document.createElement("option");a.value="all",a.textContent=`All of ${s}`,t.appendChild(a);for(const e in n){const n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)}this.region="all",t.value="all"}catch(t){console.error(`Error loading regions for ${this.continent}:`,t),e.style.display="none"}}else e.style.display="none"}async getFlags(){const t={africa:"dist/flags_africa.json",europe:"dist/flags_europe.json",asia:"dist/flags_asia.json",america:"dist/flags_america.json"}[this.continent];if(!t)return[];try{const e=await fetch(t),n=await e.json();return"all"===this.region?Object.values(n).flat():n[this.region]||[]}catch(t){return console.error("Error loading flag data:",t),[]}}getDifficultySettings(){return{easy:{rows:3,cols:4,pairs:6},medium:{rows:4,cols:4,pairs:8},hard:{rows:5,cols:4,pairs:10}}[this.difficulty]}async generateCards(){const{pairs:t}=this.getDifficultySettings();let e=await this.getFlags();if(e.length<t){this.showRegionMixNotification();const n=await this.getAdditionalFlagsFromContinent(2*t-e.length);e=[...e,...n]}e=this.shuffleArray(e);const n=[],a=e.slice(0,t);for(let e=0;e<t&&e<a.length;e++){const t=a[e];n.push(t,t)}return this.shuffleArray(n)}showRegionMixNotification(){const t=document.createElement("div");t.id="region-mix-notification",t.style.cssText="\n            position: fixed;\n            top: 50%;\n            left: 50%;\n            transform: translate(-50%, -50%);\n            background-color: var(--secondary-color);\n            color: var(--primary-color);\n            padding: 20px;\n            border: 2px solid var(--primary-color);\n            border-radius: 10px;\n            z-index: 1000;\n            text-align: center;\n            font-size: 1.2em;\n            max-width: 80%;\n            box-shadow: 0 4px 8px rgba(0,0,0,0.3);\n        ",t.innerHTML='\n            <p>Combining flags from multiple regions in this continent to ensure game completion.</p>\n            <button id="notification-close-btn" style="\n                margin-top: 15px;\n                padding: 10px 20px;\n                background-color: var(--primary-color);\n                color: var(--secondary-color);\n                border: 1px solid var(--secondary-color);\n                cursor: pointer;\n                border-radius: 5px;\n            ">Continue</button>\n        ',document.body.appendChild(t),document.getElementById("notification-close-btn").addEventListener("click",()=>{document.body.removeChild(t)}),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},5e3)}async getAdditionalFlagsFromContinent(t){const e={africa:"dist/flags_africa.json",europe:"dist/flags_europe.json",asia:"dist/flags_asia.json",america:"dist/flags_america.json"}[this.continent];if(!e)return[];try{const n=await fetch(e);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const a=await n.json();let s=[];for(const t in a)t!==this.region&&(s=[...s,...a[t]]);return this.shuffleArray(s).slice(0,t)}catch(t){return console.error(`Error loading additional flags for ${this.continent}:`,t),[]}}shuffleArray(t){const e=[...t];for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}async createGameBoard(){this.cards=await this.generateCards(),this.renderGameBoard()}renderGameBoard(){const{rows:t,cols:e}=this.getDifficultySettings();this.gameBoard.style.gridTemplateColumns=`repeat(${e}, 1fr)`,this.gameBoard.innerHTML="",this.cards.forEach((t,e)=>{const n=document.createElement("div");n.className="card",n.dataset.index=e,n.innerHTML=`\n                <div class="card-back">?</div>\n                <div class="card-front" data-tippy-content="${t.country}">\n                    ${t.flag}\n                </div>\n            `,n.addEventListener("click",()=>this.flipCard(n,e)),this.gameBoard.appendChild(n)}),this.initializeTooltips()}initializeTooltips(){tippy("[data-tippy-content]",{followCursor:!0})}flipCard(t,e){this.flippedCards.length>=2||t.classList.contains("flipped")||t.classList.contains("matched")||(this.gameStarted||(this.startTimer(),this.gameStarted=!0),t.classList.add("flipped"),this.flippedCards.push({element:t,country:this.cards[e].country,index:e}),2===this.flippedCards.length&&(this.moves++,this.movesElement.textContent=this.moves,setTimeout(()=>this.checkMatch(),1e3)))}checkMatch(){const[t,e]=this.flippedCards;t.country===e.country?(t.element.classList.add("matched"),e.element.classList.add("matched"),this.matchedPairs++,this.matchedPairs===this.getDifficultySettings().pairs&&this.gameWon()):(t.element.classList.remove("flipped"),e.element.classList.remove("flipped")),this.flippedCards=[]}startTimer(){this.startTime=Date.now(),this.timer=setInterval(()=>{const t=Math.floor((Date.now()-this.startTime)/1e3),e=Math.floor(t/60).toString().padStart(2,"0"),n=(t%60).toString().padStart(2,"0");this.timeElement.textContent=`${e}:${n}`},1e3)}stopTimer(){this.timer&&(clearInterval(this.timer),this.timer=null)}async gameWon(){this.stopTimer();const t=this.timeElement.textContent;this.nameModal&&(this.modalFinalMoves.textContent=this.moves,this.modalFinalTime.textContent=t,await this.populateCountryDropdown(),this.nameModal.style.display="block")}async populateCountryDropdown(){if(this.playerCountrySelect){this.playerCountrySelect.innerHTML='<option value="">Select your country</option>';try{const t=await this.getFlags();[...new Set(t.map(t=>t.country))].forEach(t=>{const e=document.createElement("option");e.value=t,e.textContent=t,this.playerCountrySelect.appendChild(e)})}catch(t){console.error("Error populating country dropdown:",t)}}}saveScore(t,e,n,a,s,o){const i={name:t,moves:e,time:n,difficulty:a,region:`${this.continent} - ${s}`,playerCountry:o},r=JSON.parse(localStorage.getItem("highScores"))||[];r.push(i),r.sort((t,e)=>t.moves-e.moves||t.time.localeCompare(e.time)),r.splice(10),localStorage.setItem("highScores",JSON.stringify(r))}resetGame(){this.stopTimer(),this.flippedCards=[],this.matchedPairs=0,this.moves=0,this.gameStarted=!1,this.movesElement.textContent="0",this.timeElement.textContent="00:00",this.nameModal&&(this.nameModal.style.display="none")}startNewGame(){this.resetGame(),this.createGameBoard()}async restartGame(){this.resetGame(),this.cards=this.shuffleArray([...this.cards]),await this.createGameBoard()}}window.addEventListener("DOMContentLoaded",()=>{document.getElementById("game-board")&&new t})},972:()=>{document.addEventListener("DOMContentLoaded",()=>{const t=document.getElementById("theme-toggle"),e=document.body,n=t=>{"dark"===t?e.classList.add("dark-mode"):e.classList.remove("dark-mode")},a=localStorage.getItem("theme");n(a||"light"),t.addEventListener("click",()=>{e.classList.contains("dark-mode")?(n("light"),localStorage.setItem("theme","light")):(n("dark"),localStorage.setItem("theme","dark"))})})}},e={};function n(a){var s=e[a];if(void 0!==s)return s.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var a in e)n.o(e,a)&&!n.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";n(771),n(379),n(681),n(972)})()})();